<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Business Platform | منصة الذكاء الاصطناعي للأعمال</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            transition: all 0.3s ease;
        }

        /* RTL Support */
        [dir="rtl"] {
            font-family: 'Arial', 'Tahoma', sans-serif;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .main-title {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        /* Language Toggle */
        .language-toggle {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .lang-btn {
            padding: 8px 16px;
            border: 2px solid #667eea;
            background: transparent;
            color: #667eea;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .lang-btn.active {
            background: #667eea;
            color: white;
        }

        .lang-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        /* Research & Development Enhanced Section */
        .rd-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        /* Section Navigation */
        .section-nav {
            display: flex;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .nav-btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            background: transparent;
            color: #666;
            cursor: pointer;
            border-radius: 10px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .nav-btn.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .nav-btn:hover:not(.active) {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }

        /* Section Styling */
        .section {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease;
        }

        .section:hover {
            transform: translateY(-5px);
        }

        .section-title {
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: #667eea;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-subtitle {
            color: #666;
            margin-bottom: 20px;
            font-style: italic;
        }

        /* Tool Cards */
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .tool-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .tool-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(102, 126, 234, 0.2);
            border-left-color: #764ba2;
        }

        .tool-card.active {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            border-left-color: #667eea;
            border-left-width: 6px;
        }

        .tool-title {
            font-size: 1.1rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tool-description {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        /* Features */
        .features {
            margin-bottom: 25px;
        }

        .features h4 {
            color: #333;
            margin-bottom: 10px;
        }

        .feature-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .feature-tag {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        /* Form Elements */
        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }

        .input-group textarea,
        .input-group input,
        .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .input-group textarea:focus,
        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .input-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .file-upload {
            position: relative;
            display: inline-block;
            cursor: pointer;
            width: 100%;
        }

        .file-upload input[type=file] {
            position: absolute;
            left: -9999px;
        }

        .file-upload-label {
            display: block;
            padding: 12px;
            border: 2px dashed #667eea;
            border-radius: 8px;
            text-align: center;
            color: #667eea;
            background: rgba(102, 126, 234, 0.05);
            transition: all 0.3s ease;
        }

        .file-upload:hover .file-upload-label {
            background: rgba(102, 126, 234, 0.1);
            border-color: #764ba2;
        }

        /* Buttons */
        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 15px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* Enhanced Output Areas */
        .output-area {
            margin-top: 25px;
            padding: 0;
            background: transparent;
            border: none;
            min-height: 100px;
            display: none;
        }

        .output-area.visible {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Professional Result Card */
        .result-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #667eea;
            margin-bottom: 20px;
        }

        .result-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e9ecef;
        }

        .result-title {
            font-size: 1.4rem;
            font-weight: bold;
            color: #667eea;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ai-badge {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .result-content {
            line-height: 1.8;
            color: #333;
        }

        .result-section {
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .result-section h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .result-section ul {
            list-style: none;
            padding-left: 0;
        }

        .result-section li {
            margin-bottom: 10px;
            padding-left: 25px;
            position: relative;
        }

        .result-section li:before {
            content: "✦";
            color: #667eea;
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        .highlight-box {
            background: linear-gradient(45deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }

        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            color: #667eea;
            padding: 30px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid #e1e5e9;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            font-weight: 600;
            font-size: 1.1rem;
        }

        /* Action Buttons */
        .result-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .action-btn {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            border: 1px solid #667eea;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        /* Error Styling */
        .error-card {
            background: linear-gradient(135deg, #fff5f5 0%, #fed7d7 100%);
            border: 1px solid #fc8181;
            border-radius: 10px;
            padding: 20px;
            color: #c53030;
        }

        .error-title {
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Icons */
        .icon {
            font-size: 1.2rem;
        }

        /* Hidden Content */
        .hidden {
            display: none;
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        /* Responsive Design */
        @media (max-width: 968px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .tools-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .main-title {
                font-size: 2rem;
            }

            .section {
                padding: 20px;
            }

            .section-title {
                font-size: 1.5rem;
            }

            .container {
                padding: 15px;
            }

            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }

            .result-actions {
                justify-content: center;
            }

            .section-nav {
                flex-direction: column;
                gap: 5px;
            }

            .nav-btn {
                padding: 10px 15px;
            }
        }

        @media (max-width: 480px) {
            .main-title {
                font-size: 1.5rem;
            }

            .section-title {
                font-size: 1.3rem;
            }

            .feature-list {
                flex-direction: column;
            }

            .language-toggle {
                flex-direction: column;
                align-items: center;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 class="main-title" data-en="AI Business Platform" data-ar="منصة الذكاء الاصطناعي للأعمال">AI Business Platform</h1>
            <p class="subtitle" data-en="Empowering businesses with intelligent AI solutions powered by yazeed AI" data-ar="تمكين الأعمال بحلول الذكاء الاصطناعي المتقدمة بقوة يـزيـد AI">Empowering businesses with intelligent AI solutions powered by yazeed AI</p>
            
            <!-- Language Toggle -->
            <div class="language-toggle">
                <button class="lang-btn active" onclick="setLanguage('en')">English</button>
                <button class="lang-btn" onclick="setLanguage('ar')">العربية</button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Enhanced R&D Section -->
            <div class="rd-container">
                <!-- Section Navigation -->
                <div class="section-nav">
                    <button class="nav-btn active" onclick="switchTab('research')" data-en="🔬 Research Tools" data-ar="🔬 أدوات البحث">
                        🔬 Research Tools
                    </button>
                    <button class="nav-btn" onclick="switchTab('development')" data-en="💡 Innovation Tools" data-ar="💡 أدوات الابتكار">
                        💡 Innovation Tools
                    </button>
                </div>

                <!-- Research Tools Tab -->
                <section id="research-tab" class="section tab-content active">
                    <h2 class="section-title" data-en="🔬 Scientific Research & Academic Tools" data-ar="🔬 أدوات البحث العلمي والأكاديمي">
                        🔬 Scientific Research & Academic Tools
                    </h2>
                    <p class="section-subtitle" data-en="Advanced AI-powered research assistance for scientific and academic work" data-ar="مساعدة بحثية متقدمة بالذكاء الاصطناعي للعمل العلمي والأكاديمي">
                        Advanced AI-powered research assistance for scientific and academic work
                    </p>

                    <!-- Research Tools Grid -->
                    <div class="tools-grid">
                        <div class="tool-card" onclick="selectResearchTool('paper-search')">
                            <div class="tool-title">🔍 Smart Paper Search</div>
                            <div class="tool-description">Intelligent search engine for scientific papers and research with AI-powered recommendations</div>
                        </div>
                        <div class="tool-card" onclick="selectResearchTool('literature-review')">
                            <div class="tool-title">📚 Literature Review Generator</div>
                            <div class="tool-description">Generate comprehensive literature reviews and research summaries automatically</div>
                        </div>
                        <div class="tool-card" onclick="selectResearchTool('trend-analysis')">
                            <div class="tool-title">📈 Research Trend Analysis</div>
                            <div class="tool-description">Analyze current research trends and identify emerging topics in your field</div>
                        </div>
                        <div class="tool-card" onclick="selectResearchTool('survey-generator')">
                            <div class="tool-title">📊 Survey Generator & Analyzer</div>
                            <div class="tool-description">Create research surveys and analyze results with statistical insights</div>
                        </div>
                        <div class="tool-card" onclick="selectResearchTool('plagiarism-check')">
                            <div class="tool-title">🛡️ Plagiarism & Originality Checker</div>
                            <div class="tool-description">Advanced plagiarism detection and originality verification for research content</div>
                        </div>
                        <div class="tool-card" onclick="selectResearchTool('bibliography-generator')">
                            <div class="tool-title">📋 Auto Bibliography Generator</div>
                            <div class="tool-description">Automatically generate citations and bibliographies in multiple academic formats</div>
                        </div>
                    </div>

                    <!-- Research Tool Form -->
                    <form id="research-form" onsubmit="handleResearchSubmit(event)">
                        <div id="research-tool-content">
                            <div class="input-group">
                                <label for="research-query" data-en="Research Query:" data-ar="استعلام البحث:">Research Query:</label>
                                <textarea id="research-query" placeholder="Enter your research topic, question, or content..." data-placeholder-en="Enter your research topic, question, or content..." data-placeholder-ar="أدخل موضوع البحث أو السؤال أو المحتوى..."></textarea>
                            </div>

                            <div class="input-group">
                                <label for="research-field" data-en="Research Field:" data-ar="مجال البحث:">Research Field:</label>
                                <select id="research-field">
                                    <option value="general">General Research</option>
                                    <option value="medical">Medical & Health Sciences</option>
                                    <option value="engineering">Engineering & Technology</option>
                                    <option value="computer-science">Computer Science & AI</option>
                                    <option value="physics">Physics & Mathematics</option>
                                    <option value="chemistry">Chemistry & Materials</option>
                                    <option value="biology">Biology & Life Sciences</option>
                                    <option value="social-sciences">Social Sciences</option>
                                    <option value="business">Business & Economics</option>
                                    <option value="education">Education & Psychology</option>
                                </select>
                            </div>

                            <div class="input-group">
                                <label for="research-file" data-en="Upload Research Document (Optional):" data-ar="تحميل مستند البحث (اختياري):">Upload Research Document (Optional):</label>
                                <div class="file-upload">
                                    <input type="file" id="research-file" accept=".pdf,.doc,.docx,.txt" onchange="handleFileUpload('research')">
                                    <label for="research-file" class="file-upload-label" data-en="Click to upload PDF, DOC, or TXT file" data-ar="انقر لتحميل ملف PDF أو DOC أو TXT">Click to upload PDF, DOC, or TXT file</label>
                                </div>
                            </div>
                        </div>

                        <input type="hidden" id="selected-research-tool" value="paper-search">
                        <button type="submit" class="btn" data-en="Execute Research Tool" data-ar="تنفيذ أداة البحث">Execute Research Tool</button>
                    </form>

                    <!-- Research Output Area -->
                    <div id="research-output" class="output-area">
                        <div id="research-loading" class="loading hidden">
                            <div class="spinner"></div>
                            <span class="loading-text" data-en="Processing with yazeed AI..." data-ar="جاري المعالجة بـ يـزيـد AI...">Processing with yazeed AI...</span>
                        </div>
                        <div id="research-result"></div>
                    </div>
                </section>

                <!-- Development/Innovation Tools Tab -->
                <section id="development-tab" class="section tab-content">
                    <h2 class="section-title" data-en="💡 Innovation & Development Tools" data-ar="💡 أدوات الابتكار والتطوير">
                        💡 Innovation & Development Tools
                    </h2>
                    <p class="section-subtitle" data-en="Creative innovation tools for project development and strategic planning" data-ar="أدوات الابتكار الإبداعي لتطوير المشاريع والتخطيط الاستراتيجي">
                        Creative innovation tools for project development and strategic planning
                    </p>

                    <!-- Development Tools Grid -->
                    <div class="tools-grid">
                        <div class="tool-card" onclick="selectDevelopmentTool('idea-generator')">
                            <div class="tool-title">💡 Creative Idea Generator</div>
                            <div class="tool-description">Generate innovative project ideas and creative solutions using AI brainstorming</div>
                        </div>
                        <div class="tool-card" onclick="selectDevelopmentTool('feasibility-analysis')">
                            <div class="tool-title">📊 Economic Feasibility Analysis</div>
                            <div class="tool-description">Comprehensive feasibility studies and economic viability assessments</div>
                        </div>
                        <div class="tool-card" onclick="selectDevelopmentTool('brainstorming-platform')">
                            <div class="tool-title">🧠 Collaborative Brainstorming</div>
                            <div class="tool-description">AI-enhanced group brainstorming platform for team innovation sessions</div>
                        </div>
                        <div class="tool-card" onclick="selectDevelopmentTool('project-tracker')">
                            <div class="tool-title">📋 Research Project Manager</div>
                            <div class="tool-description">Track and manage research projects with intelligent progress monitoring</div>
                        </div>
                        <div class="tool-card" onclick="selectDevelopmentTool('rd-planner')">
                            <div class="tool-title">🗺️ R&D Strategic Planner</div>
                            <div class="tool-description">Generate comprehensive research and development strategic plans</div>
                        </div>
                        <div class="tool-card" onclick="selectDevelopmentTool('risk-assessment')">
                            <div class="tool-title">⚖️ Risk & Opportunity Evaluator</div>
                            <div class="tool-description">Assess project risks and opportunities with predictive analytics</div>
                        </div>
                    </div>

                    <!-- Development Tool Form -->
                    <form id="development-form" onsubmit="handleDevelopmentSubmit(event)">
                        <div id="development-tool-content">
                            <div class="input-group">
                                <label for="development-context" data-en="Project Context:" data-ar="سياق المشروع:">Project Context:</label>
                                <textarea id="development-context" placeholder="Describe your project, challenge, or innovation goal..." data-placeholder-en="Describe your project, challenge, or innovation goal..." data-placeholder-ar="اوصف مشروعك أو التحدي أو هدف الابتكار..."></textarea>
                            </div>

                            <div class="input-group">
                                <label for="development-industry" data-en="Industry/Domain:" data-ar="الصناعة/المجال:">Industry/Domain:</label>
                                <select id="development-industry">
                                    <option value="technology">Technology & Software</option>
                                    <option value="healthcare">Healthcare & Medical</option>
                                    <option value="manufacturing">Manufacturing & Industrial</option>
                                    <option value="finance">Finance & Banking</option>
                                    <option value="energy">Energy & Environment</option>
                                    <option value="education">Education & Training</option>
                                    <option value="retail">Retail & E-commerce</option>
                                    <option value="transportation">Transportation & Logistics</option>
                                    <option value="agriculture">Agriculture & Food</option>
                                    <option value="entertainment">Media & Entertainment</option>
                                </select>
                            </div>

                            <div class="input-group">
                                <label for="development-budget" data-en="Budget Range (Optional):" data-ar="نطاق الميزانية (اختياري):">Budget Range (Optional):</label>
                                <select id="development-budget">
                                    <option value="">Select Budget Range</option>
                                    <option value="under-10k">Under $10,000</option>
                                    <option value="10k-50k">$10,000 - $50,000</option>
                                    <option value="50k-100k">$50,000 - $100,000</option>
                                    <option value="100k-500k">$100,000 - $500,000</option>
                                    <option value="500k-1m">$500,000 - $1M</option>
                                    <option value="over-1m">Over $1M</option>
                                </select>
                            </div>

                            <div class="input-group">
                                <label for="development-timeline" data-en="Project Timeline:" data-ar="الجدول الزمني للمشروع:">Project Timeline:</label>
                                <select id="development-timeline">
                                    <option value="1-3months">1-3 Months</option>
                                    <option value="3-6months">3-6 Months</option>
                                    <option value="6-12months">6-12 Months</option>
                                    <option value="1-2years">1-2 Years</option>
                                    <option value="2plus-years">2+ Years</option>
                                </select>
                            </div>
                        </div>

                        <input type="hidden" id="selected-development-tool" value="idea-generator">
                        <button type="submit" class="btn" data-en="Execute Innovation Tool" data-ar="تنفيذ أداة الابتكار">Execute Innovation Tool</button>
                    </form>

                    <!-- Development Output Area -->
                    <div id="development-output" class="output-area">
                        <div id="development-loading" class="loading hidden">
                            <div class="spinner"></div>
                            <span class="loading-text" data-en="Innovating with yazeed AI..." data-ar="جاري الابتكار بـ يـزيـد AI...">Innovating with yazeed AI...</span>
                        </div>
                        <div id="development-result"></div>
                    </div>
                </section>
            </div>

            <!-- Smart Marketing & CRM Section -->
            <section id="marketing-section" class="section">
                <h2 class="section-title" data-en="Smart Marketing & CRM" data-ar="التسويق الذكي والعملاء">Smart Marketing & CRM</h2>
                <p class="section-subtitle" data-en="Marketing insights and CRM assistant powered by AI" data-ar="رؤى التسويق ومساعد إدارة العملاء بالذكاء الاصطناعي">Marketing insights and CRM assistant powered by AI</p>
                
                <!-- Features -->
                <div class="features">
                    <h4 data-en="Features:" data-ar="الميزات:">Features:</h4>
                    <div class="feature-list">
                        <span class="feature-tag" data-en="Campaign Suggestions" data-ar="اقتراحات الحملات">Campaign Suggestions</span>
                        <span class="feature-tag" data-en="Sentiment Analysis" data-ar="تحليل المشاعر">Sentiment Analysis</span>
                        <span class="feature-tag" data-en="CRM Content Helper" data-ar="مساعد محتوى العملاء">CRM Content Helper</span>
                    </div>
                </div>

                <!-- Input Form -->
                <form id="marketing-form" onsubmit="handleMarketingSubmit(event)">
                    <div class="input-group">
                        <label for="marketing-task" data-en="Marketing Task:" data-ar="مهمة التسويق:">Marketing Task:</label>
                        <select id="marketing-task" onchange="updateMarketingForm()">
                            <option value="campaign" data-en="Generate Campaign Ideas" data-ar="توليد أفكار الحملات">Generate Campaign Ideas</option>
                            <option value="sentiment" data-en="Analyze Customer Sentiment" data-ar="تحليل مشاعر العملاء">Analyze Customer Sentiment</option>
                            <option value="crm-content" data-en="Create CRM Content" data-ar="إنشاء محتوى إدارة العملاء">Create CRM Content</option>
                            <option value="market-analysis" data-en="Market Analysis" data-ar="تحليل السوق">Market Analysis</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="marketing-industry" data-en="Industry/Product:" data-ar="الصناعة/المنتج:">Industry/Product:</label>
                        <input type="text" id="marketing-industry" placeholder="e.g., Tech startup, Fashion brand, etc." data-placeholder-en="e.g., Tech startup, Fashion brand, etc." data-placeholder-ar="مثل: شركة تقنية ناشئة، علامة أزياء، إلخ">
                    </div>

                    <div class="input-group">
                        <label for="marketing-audience" data-en="Target Audience:" data-ar="الجمهور المستهدف:">Target Audience:</label>
                        <input type="text" id="marketing-audience" placeholder="e.g., Young adults 18-30, Business professionals, etc." data-placeholder-en="e.g., Young adults 18-30, Business professionals, etc." data-placeholder-ar="مثل: الشباب 18-30، المهنيين، إلخ">
                    </div>

                    <div class="input-group" id="marketing-content-group">
                        <label for="marketing-content" data-en="Additional Context:" data-ar="السياق الإضافي:">Additional Context:</label>
                        <textarea id="marketing-content" placeholder="Provide any additional details, customer feedback, or specific requirements..." data-placeholder-en="Provide any additional details, customer feedback, or specific requirements..." data-placeholder-ar="قدم أي تفاصيل إضافية أو ملاحظات العملاء أو متطلبات محددة..."></textarea>
                    </div>

                    <button type="submit" class="btn" data-en="Generate Marketing Insights" data-ar="توليد رؤى التسويق">Generate Marketing Insights</button>
                </form>

                <!-- Output Area -->
                <div id="marketing-output" class="output-area">
                    <div id="marketing-loading" class="loading hidden">
                        <div class="spinner"></div>
                        <span class="loading-text" data-en="Generating insights with yazeed AI..." data-ar="جاري توليد الرؤى بـ يـزيـد AI...">Generating insights with yazeed AI...</span>
                    </div>
                    <div id="marketing-result"></div>
                </div>
            </section>
        </main>
    </div>

    <script>
        // Gemini API Configuration
        const GEMINI_API_KEY = 'AIzaSyDsAfBjKrEGQWhacA6ttntVhgjCubDdifI';
        const GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent';

        // Global variables
        let currentLanguage = 'en';
        let selectedResearchTool = 'paper-search';
        let selectedDevelopmentTool = 'idea-generator';
        
        // Language Management
        function setLanguage(lang) {
            currentLanguage = lang;
            document.documentElement.setAttribute('lang', lang);
            document.documentElement.setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');
            
            // Update active button
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update all text content
            document.querySelectorAll('[data-' + lang + ']').forEach(element => {
                element.textContent = element.getAttribute('data-' + lang);
            });
            
            // Update placeholders
            document.querySelectorAll('[data-placeholder-' + lang + ']').forEach(element => {
                element.placeholder = element.getAttribute('data-placeholder-' + lang);
            });
            
            console.log(`Language switched to: ${lang}`);
        }

        // Tab switching functionality
        function switchTab(tabName) {
            // Update nav buttons
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName + '-tab').classList.add('active');
            
            console.log(`Switched to ${tabName} tab`);
        }

        // Research tool selection
        function selectResearchTool(tool) {
            // Update active tool card
            document.querySelectorAll('#research-tab .tool-card').forEach(card => {
                card.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            selectedResearchTool = tool;
            document.getElementById('selected-research-tool').value = tool;
            
            console.log(`Selected research tool: ${tool}`);
        }

        // Development tool selection
        function selectDevelopmentTool(tool) {
            // Update active tool card
            document.querySelectorAll('#development-tab .tool-card').forEach(card => {
                card.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            selectedDevelopmentTool = tool;
            document.getElementById('selected-development-tool').value = tool;
            
            console.log(`Selected development tool: ${tool}`);
        }

        // File Upload Handler
        function handleFileUpload(section) {
            const fileInput = document.getElementById(section + '-file');
            const file = fileInput.files[0];
            
            if (file) {
                console.log(`File uploaded for ${section}:`, file.name, file.type, file.size);
                
                // Update label to show file name
                const label = fileInput.nextElementSibling;
                label.textContent = `Selected: ${file.name}`;
                label.style.color = '#28a745';
                
                // Read file content for text files
                if (file.type === 'text/plain' || file.name.endsWith('.txt')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const content = e.target.result;
                        document.getElementById(section + '-query').value = content;
                        console.log('File content loaded into textarea');
                    };
                    reader.readAsText(file);
                }
            }
        }

        // Research Section Handler
        async function handleResearchSubmit(event) {
            event.preventDefault();
            
            const query = document.getElementById('research-query').value;
            const field = document.getElementById('research-field').value;
            const fileInput = document.getElementById('research-file');
            const tool = selectedResearchTool;
            
            if (!query && !fileInput.files[0]) {
                alert(currentLanguage === 'en' ? 'Please provide a research query or upload a file.' : 'يرجى تقديم استعلام بحث أو تحميل ملف.');
                return;
            }
            
            // Show loading
            showLoading('research');
            
            // Generate prompt based on selected tool
            const prompt = generateResearchPrompt(tool, query, field);
            
            console.log('Research Request:', {
                tool: tool,
                field: field,
                hasFile: !!fileInput.files[0],
                queryLength: query.length
            });
            
            try {
                const result = await callGeminiAPI(prompt, 'research');
                displayEnhancedResult('research', result, tool);
            } catch (error) {
                console.error('Research API Error:', error);
                displayError('research', error.message);
            }
        }

        // Development Section Handler
        async function handleDevelopmentSubmit(event) {
            event.preventDefault();
            
            const context = document.getElementById('development-context').value;
            const industry = document.getElementById('development-industry').value;
            const budget = document.getElementById('development-budget').value;
            const timeline = document.getElementById('development-timeline').value;
            const tool = selectedDevelopmentTool;
            
            if (!context) {
                alert(currentLanguage === 'en' ? 'Please provide project context.' : 'يرجى تقديم سياق المشروع.');
                return;
            }
            
            // Show loading
            showLoading('development');
            
            // Generate prompt based on selected tool
            const prompt = generateDevelopmentPrompt(tool, context, industry, budget, timeline);
            
            console.log('Development Request:', {
                tool: tool,
                industry: industry,
                budget: budget,
                timeline: timeline,
                contextLength: context.length
            });
            
            try {
                const result = await callGeminiAPI(prompt, 'development');
                displayEnhancedResult('development', result, tool);
            } catch (error) {
                console.error('Development API Error:', error);
                displayError('development', error.message);
            }
        }

        // Generate research prompts based on selected tool
        function generateResearchPrompt(tool, query, field) {
            const baseContext = `Research Field: ${field}\nQuery: ${query}`;
            
            switch(tool) {
                case 'paper-search':
                    return `As an expert research librarian and academic search specialist, help find and recommend relevant scientific papers and research materials.

${baseContext}

Provide:
1. Recommended Search Keywords and Terms
2. Top 10 Relevant Research Papers (with simulated titles and authors)
3. Key Research Institutions and Labs in this area
4. Related Research Topics and Subtopics
5. Suggested Academic Databases and Sources
6. Research Methodology Recommendations

Format as a comprehensive research guide with actionable search strategies.`;

                case 'literature-review':
                    return `As an academic writing expert, create a comprehensive literature review structure and content outline.

${baseContext}

Generate:
1. Literature Review Structure and Outline
2. Key Themes and Research Gaps Identified
3. Chronological Development of the Field
4. Major Theoretical Frameworks
5. Methodological Approaches Used
6. Future Research Directions
7. Critical Analysis and Synthesis

Provide a detailed academic literature review framework.`;

                case 'trend-analysis':
                    return `As a research trend analyst and scientific forecaster, analyze current and emerging trends in the research field.

${baseContext}

Analyze and provide:
1. Current Hot Topics and Trending Research Areas
2. Emerging Technologies and Methodologies
3. Publication Trend Analysis (growth areas)
4. Funding and Investment Trends
5. Geographic Research Distribution
6. Collaboration Patterns and Networks
7. Future Predictions (3-5 year outlook)

Include quantitative insights and trend visualizations descriptions.`;

                case 'survey-generator':
                    return `As a research methodology expert, create a comprehensive survey design and analysis framework.

${baseContext}

Develop:
1. Research Objectives and Hypotheses
2. Target Population and Sampling Strategy
3. Detailed Survey Questions (20-30 questions)
4. Question Types and Response Scales
5. Data Collection Methods
6. Statistical Analysis Plan
7. Expected Results and Validation Methods

Provide a complete survey research protocol.`;

                case 'plagiarism-check':
                    return `As an academic integrity specialist, provide a comprehensive originality assessment and writing improvement guide.

${baseContext}

Evaluate and provide:
1. Originality Assessment Criteria
2. Common Plagiarism Patterns to Avoid
3. Proper Citation and Referencing Guidelines
4. Paraphrasing and Summarization Techniques
5. Academic Writing Best Practices
6. Integrity Checklist and Verification Steps
7. Improvement Recommendations

Include practical examples and guidelines for maintaining academic integrity.`;

                case 'bibliography-generator':
                    return `As an academic citation expert, generate comprehensive bibliographies and citation guidelines.

${baseContext}

Create:
1. APA Style Citations (10 relevant sources)
2. MLA Style Citations (same sources)
3. Chicago Style Citations (same sources)
4. IEEE Style Citations (for technical fields)
5. Citation Management Tips and Tools
6. Reference Organization Strategies
7. In-text Citation Examples

Provide formatted citations and comprehensive referencing guide.`;

                default:
                    return `Analyze the following research query and provide comprehensive insights: ${baseContext}`;
            }
        }

        // Generate development prompts based on selected tool
        function generateDevelopmentPrompt(tool, context, industry, budget, timeline) {
            const baseContext = `Project Context: ${context}\nIndustry: ${industry}\nBudget: ${budget}\nTimeline: ${timeline}`;
            
            switch(tool) {
                case 'idea-generator':
                    return `As a creative innovation strategist and idea generation expert, develop revolutionary project ideas.

${baseContext}

Generate:
1. 10 Breakthrough Innovation Ideas (detailed concepts)
2. Unique Value Propositions for each idea
3. Market Disruption Potential Assessment
4. Implementation Difficulty Analysis
5. Resource Requirements Estimation
6. Competitive Advantage Identification
7. Innovation Scoring and Ranking

Provide creative, actionable innovation concepts with clear business potential.`;

                case 'feasibility-analysis':
                    return `As a business analyst and feasibility study expert, conduct comprehensive project viability assessment.

${baseContext}

Analyze:
1. Market Feasibility and Size Analysis
2. Technical Feasibility Assessment
3. Financial Projections and ROI Analysis
4. Risk Assessment Matrix
5. Resource Requirements Breakdown
6. Implementation Timeline and Milestones
7. Success Factors and KPIs
8. SWOT Analysis
9. Break-even Analysis

Provide detailed feasibility report with quantitative assessments.`;

                case 'brainstorming-platform':
                    return `As a creative facilitation expert, design a comprehensive brainstorming session and idea development framework.

${baseContext}

Design:
1. Brainstorming Session Structure and Agenda
2. Creative Thinking Techniques and Methods
3. Idea Generation Prompts and Challenges
4. Collaboration Tools and Processes
5. Idea Evaluation and Filtering Criteria
6. Concept Development Framework
7. Action Planning and Next Steps

Create an engaging collaborative innovation experience.`;

                case 'project-tracker':
                    return `As a project management expert, create a comprehensive research project management and tracking system.

${baseContext}

Develop:
1. Project Breakdown Structure (WBS)
2. Detailed Timeline and Milestones
3. Resource Allocation Plan
4. Risk Management Strategy
5. Progress Tracking Metrics and KPIs
6. Team Roles and Responsibilities
7. Communication and Reporting Framework
8. Quality Assurance Checkpoints

Provide a complete project management blueprint.`;

                case 'rd-planner':
                    return `As an R&D strategy consultant, develop a comprehensive research and development strategic plan.

${baseContext}

Create:
1. R&D Strategic Vision and Objectives
2. Research Priority Areas and Focus
3. Technology Roadmap (3-5 years)
4. Innovation Pipeline Management
5. Partnership and Collaboration Strategy
6. Intellectual Property Strategy
7. Funding and Investment Plan
8. Performance Measurement Framework

Deliver a strategic R&D roadmap with actionable recommendations.`;

                case 'risk-assessment':
                    return `As a risk management and opportunity assessment specialist, evaluate project risks and opportunities.

${baseContext}

Assess:
1. Comprehensive Risk Identification and Categorization
2. Risk Probability and Impact Analysis
3. Risk Mitigation Strategies and Controls
4. Opportunity Identification and Assessment
5. Scenario Planning and Contingency Plans
6. Risk Monitoring and Early Warning Indicators
7. Decision Tree Analysis
8. Risk-Opportunity Matrix

Provide detailed risk management and opportunity optimization plan.`;

                default:
                    return `Analyze the following development context and provide comprehensive insights: ${baseContext}`;
            }
        }

        // Marketing Section Handler (unchanged)
        async function handleMarketingSubmit(event) {
            event.preventDefault();
            
            const task = document.getElementById('marketing-task').value;
            const industry = document.getElementById('marketing-industry').value;
            const audience = document.getElementById('marketing-audience').value;
            const content = document.getElementById('marketing-content').value;
            
            if (!industry || !audience) {
                alert(currentLanguage === 'en' ? 'Please fill in industry and target audience.' : 'يرجى ملء الصناعة والجمهور المستهدف.');
                return;
            }
            
            showLoading('marketing');
            
            let prompt = '';
            switch(task) {
                case 'campaign':
                    prompt = `As a senior marketing strategist, create a comprehensive campaign strategy for ${industry} targeting ${audience}.

Include:
1. 3 Creative Campaign Concepts with unique positioning
2. Multi-channel Marketing Strategy (digital, social, traditional)
3. Content Calendar and Key Messages
4. Budget Allocation Recommendations
5. Success Metrics and KPIs
6. Timeline and Implementation Plan

Additional Context: ${content}

Provide actionable, data-driven campaign strategies with clear ROI expectations.`;
                    break;
                case 'sentiment':
                    prompt = `As a customer insights analyst, perform comprehensive sentiment analysis for ${industry} targeting ${audience}.

Analyze and provide:
1. Overall Sentiment Score and Classification
2. Key Sentiment Drivers (positive/negative factors)
3. Emotional Response Patterns
4. Customer Journey Sentiment Mapping
5. Actionable Recommendations for Improvement
6. Competitive Sentiment Comparison

Customer Data: ${content}

Include statistical insights and predictive sentiment trends.`;
                    break;
                case 'crm-content':
                    prompt = `As a CRM content specialist, create comprehensive customer communication strategy for ${industry} targeting ${audience}.

Develop:
1. Personalized Email Sequences (Welcome, Nurture, Retention)
2. SMS/Push Notification Templates
3. Customer Segmentation Strategies
4. Automated Response Systems
5. Customer Lifecycle Communications
6. Performance Optimization Guidelines

Context: ${content}

Provide ready-to-use templates with personalization variables and A/B testing suggestions.`;
                    break;
                case 'market-analysis':
                    prompt = `As a market research analyst, conduct comprehensive market analysis for ${industry} targeting ${audience}.

Provide:
1. Market Size and Growth Projections
2. Competitive Landscape Analysis
3. Customer Behavior Insights
4. Market Entry Strategies
5. Pricing Strategy Recommendations
6. Risk Assessment and Mitigation
7. Market Opportunity Mapping

Additional Info: ${content}

Include quantitative insights, market trends, and strategic recommendations.`;
                    break;
            }
            
            try {
                const result = await callGeminiAPI(prompt, 'marketing');
                displayEnhancedResult('marketing', result, task);
            } catch (error) {
                console.error('Marketing API Error:', error);
                displayError('marketing', error.message);
            }
        }

        // Update marketing form based on selected task
        function updateMarketingForm() {
            const task = document.getElementById('marketing-task').value;
            const contentGroup = document.getElementById('marketing-content-group');
            const contentLabel = contentGroup.querySelector('label');
            const contentTextarea = document.getElementById('marketing-content');
            
            switch(task) {
                case 'campaign':
                    contentLabel.textContent = currentLanguage === 'en' ? 'Campaign Requirements:' : 'متطلبات الحملة:';
                    contentTextarea.placeholder = currentLanguage === 'en' ? 
                        'Describe your campaign goals, budget, timeline, or specific requirements...' :
                        'اوصف أهداف الحملة والميزانية والجدول الزمني أو المتطلبات المحددة...';
                    break;
                case 'sentiment':
                    contentLabel.textContent = currentLanguage === 'en' ? 'Customer Feedback:' : 'ملاحظات العملاء:';
                    contentTextarea.placeholder = currentLanguage === 'en' ? 
                        'Paste customer reviews, comments, or feedback to analyze...' :
                        'الصق مراجعات العملاء أو التعليقات أو الملاحظات للتحليل...';
                    break;
                case 'crm-content':
                    contentLabel.textContent = currentLanguage === 'en' ? 'Content Requirements:' : 'متطلبات المحتوى:';
                    contentTextarea.placeholder = currentLanguage === 'en' ? 
                        'Specify the type of CRM content needed (emails, SMS, notifications, etc.)...' :
                        'حدد نوع محتوى إدارة العملاء المطلوب (رسائل بريد إلكتروني، رسائل نصية، إشعارات، إلخ)...';
                    break;
                case 'market-analysis':
                    contentLabel.textContent = currentLanguage === 'en' ? 'Market Context:' : 'سياق السوق:';
                    contentTextarea.placeholder = currentLanguage === 'en' ? 
                        'Provide market conditions, competitors, or specific analysis requirements...' :
                        'قدم ظروف السوق أو المنافسين أو متطلبات التحليل المحددة...';
                    break;
            }
        }

        // Show loading state
        function showLoading(section) {
            const outputArea = document.getElementById(section + '-output');
            const loadingDiv = document.getElementById(section + '-loading');
            const resultDiv = document.getElementById(section + '-result');
            
            outputArea.classList.add('visible');
            loadingDiv.classList.remove('hidden');
            resultDiv.innerHTML = '';
        }

        // Hide loading state
        function hideLoading(section) {
            const loadingDiv = document.getElementById(section + '-loading');
            loadingDiv.classList.add('hidden');
        }

        // Enhanced result display function
        function displayEnhancedResult(section, result, taskType) {
            hideLoading(section);
            const resultDiv = document.getElementById(section + '-result');
            
            const structuredResult = parseAIResponse(result, taskType, section);
            
            resultDiv.innerHTML = `
                <div class="result-card">
                    <div class="result-header">
                        <div class="result-title">
                            <span class="icon">🤖</span>
                            ${currentLanguage === 'en' ? 'AI Analysis Results' : 'نتائج تحليل الذكاء الاصطناعي'}
                        </div>
                        <div class="ai-badge">yazeed AI</div>
                    </div>
                    
                    <div class="result-content">
                        ${structuredResult}
                    </div>
                    
                    <div class="result-actions">
                        <button class="action-btn" onclick="copyResult('${section}')">
                            📋 ${currentLanguage === 'en' ? 'Copy Results' : 'نسخ النتائج'}
                        </button>
                        <button class="action-btn" onclick="exportResult('${section}')">
                            📄 ${currentLanguage === 'en' ? 'Export PDF' : 'تصدير PDF'}
                        </button>
                        <button class="action-btn" onclick="shareResult('${section}')">
                            🔗 ${currentLanguage === 'en' ? 'Share' : 'مشاركة'}
                        </button>
                    </div>
                </div>
            `;
        }

        // Parse AI response into structured format
        function parseAIResponse(response, taskType, section) {
            const lines = response.split('\n').filter(line => line.trim());
            let structuredHTML = '';
            let currentSection = '';
            let sectionContent = [];
            
            lines.forEach(line => {
                line = line.trim();
                
                if (line.match(/^\d+\./) || line.match(/^[#*-]/) || line.includes(':') && line.length < 100) {
                    if (currentSection && sectionContent.length > 0) {
                        structuredHTML += createResultSection(currentSection, sectionContent, section);
                        sectionContent = [];
                    }
                    
                    currentSection = line.replace(/^\d+\.\s*/, '').replace(/^[#*-]\s*/, '').replace(':', '');
                } else if (line.length > 0) {
                    sectionContent.push(line);
                }
            });
            
            if (currentSection && sectionContent.length > 0) {
                structuredHTML += createResultSection(currentSection, sectionContent, section);
            }
            
            if (!structuredHTML) {
                structuredHTML = `
                    <div class="result-section">
                        <h3><span class="icon">📊</span> Analysis Results</h3>
                        <div class="highlight-box">${response.replace(/\n/g, '<br>')}</div>
                    </div>
                `;
            }
            
            return structuredHTML;
        }

        // Create formatted result section
        function createResultSection(title, content, section) {
            const icon = getSectionIcon(title, section);
            const formattedContent = content.map(item => {
                if (item.includes('•') || item.includes('-') || item.match(/^\d+\./)) {
                    return `<li>${item.replace(/^[•-]\s*/, '').replace(/^\d+\.\s*/, '')}</li>`;
                } else {
                    return `<p>${item}</p>`;
                }
            }).join('');
            
            const listContent = content.some(item => 
                item.includes('•') || item.includes('-') || item.match(/^\d+\./)
            ) ? `<ul>${formattedContent}</ul>` : formattedContent;
            
            return `
                <div class="result-section">
                    <h3>${icon} ${title}</h3>
                    <div>${listContent}</div>
                </div>
            `;
        }

        // Get appropriate icon for section
        function getSectionIcon(title, section) {
            const titleLower = title.toLowerCase();
            
            if (titleLower.includes('search') || titleLower.includes('paper')) return '🔍';
            if (titleLower.includes('literature') || titleLower.includes('review')) return '📚';
            if (titleLower.includes('trend') || titleLower.includes('analysis')) return '📈';
            if (titleLower.includes('survey') || titleLower.includes('question')) return '📊';
            if (titleLower.includes('plagiarism') || titleLower.includes('originality')) return '🛡️';
            if (titleLower.includes('bibliography') || titleLower.includes('citation')) return '📋';
            if (titleLower.includes('idea') || titleLower.includes('creative')) return '💡';
            if (titleLower.includes('feasibility') || titleLower.includes('economic')) return '💰';
            if (titleLower.includes('brainstorm') || titleLower.includes('collaboration')) return '🧠';
            if (titleLower.includes('project') || titleLower.includes('tracker')) return '📋';
            if (titleLower.includes('plan') || titleLower.includes('strategy')) return '🗺️';
            if (titleLower.includes('risk') || titleLower.includes('opportunity')) return '⚖️';
            if (titleLower.includes('market') || titleLower.includes('campaign')) return '📢';
            if (titleLower.includes('sentiment') || titleLower.includes('customer')) return '❤️';
            
            return section === 'research' ? '🔬' : section === 'development' ? '💡' : '📊';
        }

        // Action button functions
        function copyResult(section) {
            const resultText = document.getElementById(section + '-result').innerText;
            navigator.clipboard.writeText(resultText).then(() => {
                alert(currentLanguage === 'en' ? 'Results copied to clipboard!' : 'تم نسخ النتائج إلى الحافظة!');
            });
        }

        function exportResult(section) {
            alert(currentLanguage === 'en' ? 'PDF export feature coming soon!' : 'ميزة تصدير PDF قريباً!');
        }

        function shareResult(section) {
            if (navigator.share) {
                const resultText = document.getElementById(section + '-result').innerText;
                navigator.share({
                    title: 'AI Analysis Results',
                    text: resultText
                });
            } else {
                copyResult(section);
            }
        }

        // Display error
        function displayError(section, error) {
            hideLoading(section);
            const resultDiv = document.getElementById(section + '-result');
            resultDiv.innerHTML = `
                <div class="error-card">
                    <div class="error-title">
                        <span class="icon">❌</span>
                        ${currentLanguage === 'en' ? 'Error Processing Request' : 'خطأ في معالجة الطلب'}
                    </div>
                    <p>${error}</p>
                    <p style="margin-top: 10px; font-size: 0.9rem; opacity: 0.8;">
                        ${currentLanguage === 'en' ? 'Please try again or contact support if the problem persists.' : 'يرجى المحاولة مرة أخرى أو الاتصال بالدعم إذا استمرت المشكلة.'}
                    </p>
                </div>
            `;
        }

        // Main Gemini API Integration Function
        async function callGeminiAPI(promptText, section) {
            console.log(`Calling yazeed AI API for ${section} section:`, promptText.substring(0, 100) + '...');
            
            try {
                const response = await fetch(`${GEMINI_API_URL}?key=${GEMINI_API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: promptText
                            }]
                        }],
                        generationConfig: {
                            temperature: 0.7,
                            topK: 40,
                            topP: 0.95,
                            maxOutputTokens: 8192,
                        },
                        safetySettings: [
                            {
                                category: "HARM_CATEGORY_HARASSMENT",
                                threshold: "BLOCK_MEDIUM_AND_ABOVE"
                            },
                            {
                                category: "HARM_CATEGORY_HATE_SPEECH",
                                threshold: "BLOCK_MEDIUM_AND_ABOVE"
                            },
                            {
                                category: "HARM_CATEGORY_SEXUALLY_EXPLICIT",
                                threshold: "BLOCK_MEDIUM_AND_ABOVE"
                            },
                            {
                                category: "HARM_CATEGORY_DANGEROUS_CONTENT",
                                threshold: "BLOCK_MEDIUM_AND_ABOVE"
                            }
                        ]
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(`API request failed: ${response.status} - ${errorData.error?.message || 'Unknown error'}`);
                }

                const data = await response.json();
                
                if (!data.candidates || !data.candidates[0] || !data.candidates[0].content) {
                    throw new Error('Invalid response format from API');
                }

                const result = data.candidates[0].content.parts[0].text;
                console.log('Gemini API Response received:', result.substring(0, 200) + '...');
                
                return result;
                
            } catch (error) {
                console.error('Gemini API Error:', error);
                
                if (error.message.includes('API_KEY')) {
                    throw new Error(currentLanguage === 'en' ? 
                        'API key error. Please check the API configuration.' : 
                        'خطأ في مفتاح API. يرجى التحقق من إعدادات API.');
                } else if (error.message.includes('QUOTA')) {
                    throw new Error(currentLanguage === 'en' ? 
                        'API quota exceeded. Please try again later.' : 
                        'تم تجاوز حصة API. يرجى المحاولة لاحقاً.');
                } else if (error.message.includes('403')) {
                    throw new Error(currentLanguage === 'en' ? 
                        'Access denied. Please check API permissions.' : 
                        'تم رفض الوصول. يرجى التحقق من صلاحيات API.');
                } else {
                    throw new Error(currentLanguage === 'en' ? 
                        'Connection error. Please check your internet connection and try again.' : 
                        'خطأ في الاتصال. يرجى التحقق من اتصال الإنترنت والمحاولة مرة أخرى.');
                }
            }
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Enhanced AI Business Platform with yazeed AI loaded successfully');
            console.log('API Configuration:', {
                model: 'gemini-2.0-flash-exp',
                apiUrl: GEMINI_API_URL,
                hasApiKey: !!GEMINI_API_KEY
            });
            
            // Set initial language
            setLanguage('en');
            
            // Initialize forms
            updateMarketingForm();
            
            // Set initial tool selections
            document.querySelector('#research-tab .tool-card').classList.add('active');
            document.querySelector('#development-tab .tool-card').classList.add('active');
        });
    </script>
</body>
</html>
